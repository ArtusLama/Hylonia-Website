
/* ============================================
   Animated Underline System - Tailwind v4
   ============================================
   
   Created by: ArtusLama (ArtusDev / Arthur)
   Copyright © 2025 ArtusLama
   
   GPU-accelerated underline animations with full Tailwind v4 integration.
   Leverages modern CSS features including CSS variables, transform animations,
   and Tailwind's @utility directive for maximum flexibility and performance.
   
   BASIC USAGE:
   ------------
   <a class="underline-base hover:underline-expanded">
      Hover me
   </a>
   
   PATTERN:
   --------
   1. underline-base              → Sets up positioning, CSS variables & initial hidden state
   2. [trigger]:underline-expanded → Show on your trigger (hover, focus, active, group-*, etc.)
   
   CUSTOMIZATION:
   --------------
   Direction (simple - bidirectional, same for in & out):
     underline-left     → Expand left to right (default)
     underline-right    → Expand right to left
     underline-center   → Expand from center outward
   
   Direction (advanced - independent in/out control):
     underline-in-left + underline-out-right   → Enter from left, exit to right
     underline-in-right + underline-out-left   → Enter from right, exit to left
     underline-in-center + underline-out-left  → Enter from center, exit to left
     underline-in-center + underline-out-right → Enter from center, exit to right
     (Mix and match any of the 9 possible combinations)
   
   Thickness (supports theme tokens, bare integers, and arbitrary values):
     underline-thin         → 1px (theme token)
     underline-thick        → 3px (theme token)
     underline-bold         → 4px (theme token)
     underline-5            → 5px (bare integer → px)
     underline-[5px]        → 5px (arbitrary value)
     underline-[0.5rem]     → 0.5rem (arbitrary value)
   
   Duration (supports theme tokens, bare integers, and arbitrary values):
     underline-duration-fast    → 150ms (theme token)
     underline-duration-slow    → 500ms (theme token)
     underline-duration-1000    → 1000ms (bare integer → ms)
     underline-duration-[1s]    → 1s (arbitrary value)
     underline-duration-[1.5s]  → 1.5s (arbitrary value)
   
   Timing (supports theme presets and arbitrary functions):
     underline-ease-bounce      → Elastic bounce (theme preset)
     underline-ease-spring      → Spring overshoot (theme preset)
     underline-timing-[linear]  → Linear timing (arbitrary)
     underline-timing-[ease-in] → Ease-in timing (arbitrary)
     underline-timing-[cubic-bezier(0.4,0,0.2,1)] → Custom bezier (arbitrary)
   
   Offset (supports theme tokens, spacing scale, and arbitrary values):
     Positive values move underline DOWN (away from text)
     Negative values move underline UP (closer to text)
     
     underline-offset-1         → Uses --underline-offset-1 theme token (calc(var(--spacing) * -2))
     underline-offset-2         → Uses --underline-offset-2 theme token (calc(var(--spacing) * -4))
     underline-offset-4         → Uses spacing scale: 4 × 0.25rem × -1 = -1rem (down)
     underline-offset-[3px]     → 3px × -1 = -3px (down)
     underline-offset-[-2px]    → -2px (up, preserves negative sign)
     -underline-offset-4        → 4 × 0.25rem = 1rem (up, inverted)
     -underline-offset-[3px]    → 3px (up, no inversion)
   
   Color (supports arbitrary color values):
     underline-color-[red]                → Named color
     underline-color-[#3b82f6]            → Hex color
     underline-color-[rgb(59,130,246)]    → RGB color
     underline-color-[oklch(0.7_0.2_150)] → OKLCH color
     (Defaults to currentColor if not specified)
   
   EXAMPLES:
   ---------
   Basic:
   <a class="underline-base hover:underline-expanded">
   
   With direction and speed:
   <a class="underline-base underline-center underline-duration-fast 
             hover:underline-expanded">
   
   With custom thickness and easing:
   <button class="underline-base underline-bold underline-ease-bounce 
                  active:underline-expanded">
   
   Complex combination with arbitrary values:
   <a class="underline-base underline-[8px] underline-duration-[2s] 
             underline-color-[#3b82f6] underline-in-left underline-out-right
             hover:underline-expanded">
   
   Navigation link with group hover:
   <a class="group">
     <span class="underline-base underline-center group-hover:underline-expanded">
       Link Text
     </span>
   </a>
   
   TECHNICAL DETAILS:
   ------------------
   - Uses transform: scaleX() for GPU-accelerated 60fps animations
   - Employs CSS custom properties for runtime configuration
   - No JavaScript required - pure CSS solution
   - Tree-shakeable - only used classes included in final CSS
   - Compatible with all Tailwind variants (hover, focus, active, group-*, etc.)
   - Supports Tailwind v4's --value() function with multiple declarations
   - Resolution order: bare integers → arbitrary values → spacing scale → theme tokens
   
   THEME EXTENSION:
   ----------------
   Extend with custom tokens in your CSS:
   
   @theme {
     --underline-thickness-hairline: 0.5px;
     --underline-duration-ultra-fast: 75ms;
     --underline-ease-elastic: cubic-bezier(0.68, -0.55, 0.27, 1.55);
     --underline-offset-3: calc(var(--spacing) * -6);
   }
   
   Then use: underline-hairline, underline-duration-ultra-fast, 
             underline-ease-elastic, underline-offset-3
   
   ============================================ */

/* Theme tokens - users can extend these with their own variants */
@theme inline {
    /* Thickness variants */
    --underline-thickness-thin: 1px;
    --underline-thickness-thick: 3px;
    --underline-thickness-bold: 4px;
    
    /* Duration variants */
    --underline-duration-fast: 150ms;
    --underline-duration-slow: 500ms;
    
    /* Timing function presets */
    --underline-ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --underline-ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    
    /* Offset variants - negative values move underline down (away from text) */
    --underline-offset-1: calc(var(--spacing) * -2);
    --underline-offset-2: calc(var(--spacing) * -4);
}

/* Base utility - sets up container, CSS variables, and initial collapsed state */
@utility underline-base {
    display: inline-block;
    position: relative;
    
    --underline-thickness: 2px;
    --underline-offset: 0px;
    --underline-duration: 300ms;
    --underline-timing: ease-in-out;
    --underline-origin: left;
    --underline-origin-in: left;
    --underline-origin-out: left;
    --underline-color: currentColor;
    
    @variant after {
        position: absolute;
        content: "";
        height: var(--underline-thickness);
        bottom: var(--underline-offset);
        left: 0;
        right: 0;
        background-color: var(--underline-color);
        transform: scaleX(0);
        transform-origin: var(--underline-origin-out);
        transition: transform var(--underline-duration) var(--underline-timing);
    }
}

/* Expanded state - underline visible */
@utility underline-expanded {
    @variant after {
        transform: scaleX(1);
        transform-origin: var(--underline-origin-in);
    }
}

/* Direction utilities - simple (same for both in/out) */
@utility underline-left {
    --underline-origin: left;
    --underline-origin-in: left;
    --underline-origin-out: left;
}

@utility underline-right {
    --underline-origin: right;
    --underline-origin-in: right;
    --underline-origin-out: right;
}

@utility underline-center {
    --underline-origin: center;
    --underline-origin-in: center;
    --underline-origin-out: center;
}

/* Independent direction control for in/out animations */
@utility underline-in-left {
    --underline-origin-in: left;
}

@utility underline-in-right {
    --underline-origin-in: right;
}

@utility underline-in-center {
    --underline-origin-in: center;
}

@utility underline-out-left {
    --underline-origin-out: left;
}

@utility underline-out-right {
    --underline-origin-out: right;
}

@utility underline-out-center {
    --underline-origin-out: center;
}

/* Thickness utilities */
@utility underline-* {
    --underline-thickness: calc(--value(integer) * 1px);
    --underline-thickness: --value([length]);
    --underline-thickness: --value(--underline-thickness-*);
}

/* Offset utilities - positive values move underline down (away from text) */
@utility underline-offset-* {
    --underline-offset: calc(--value(integer) * var(--spacing) * -1);
    --underline-offset: calc(--value([dimension]) * -1);
    --underline-offset: calc(--value(--spacing-*) * -1);
    --underline-offset: --value(--underline-offset-*);
}

@utility -underline-offset-* {
    --underline-offset: calc(--value(integer) * var(--spacing));
    --underline-offset: --value([dimension]);
    --underline-offset: --value(--spacing-*);
    --underline-offset: calc(--value(--underline-offset-*) * -1);
}

/* Duration utilities */
@utility underline-duration-* {
    --underline-duration: calc(--value(integer) * 1ms);
    --underline-duration: --value([time]);
    --underline-duration: --value(--underline-duration-*);
}

/* Timing utilities */
@utility underline-timing-* {
    --underline-timing: --value([*]);
    --underline-timing: --value(--underline-timing-*);
}

/* Ease presets using timing pattern */
@utility underline-ease-* {
    --underline-timing: --value([*]);
    --underline-timing: --value(--underline-ease-*);
}

/* Color utilities */
@utility underline-color-* {
    --underline-color: --value([color]);
}